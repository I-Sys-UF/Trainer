# 使い方

1. とりあえず書き込んで動かしてみる
2. （できそうであれば）コードを読みながら，どの動きがどのコードに対応しているのか考えてみる

# 説明

`Train-1` と比べると格段にコードの量が増えた．ある程度実用的なコードを書こうとすると，どうしても長くならざるを得ない

それはさておき，このコードは，マクロ定義，`setup()` 関数，`loop()` 関数から成るが，`loop()` 関数にもコードが書かれている．つまり，起動したあとに `setup()` が実行されたあと，電源が切れるまで無限に `loop()` 文が呼ばれ続けるということになるという点に注意して欲しい

さて，ここで使用している関数の説明をこれからしていく．わからないことがあれば先輩などに聞いてみてほしい

## setup() 関数

`setup()` 関数では，以下の 2 つの関数が使用されている．いづれも Arduino で用意されている関数である

- `pinMode()`
- `digitalWrite()`

また，以下の 2 つの制御が使用されている

### pinMode() 関数

この関数は，第一引数に設定したいピンの番号を，第二引数に設定したい状態を指定して使用する．ピンの番号はほとんどの場合ボード上にかかれている番号そのままである  
状態は以下の 3 通り指定することができる

- `INPUT`
- `INPUT_PULLUP`
- `OUTPUT`

`INPUT` `OUTPUT` については文字通り入力・出力で，`INPUT_PULLUP` は，指定したピンを入力にしつつ，内蔵のプルアップ抵抗を有効にするもので，スイッチなどを接続する際に使用する．これを使うことで外付けのプルアップ抵抗を省くことができる

### digitalWrite() 関数

この関数は，第一引数に操作したいピンの番号を，第二引数に設定したい状態を指定して使用する．ピンの番号については先述の通りで，状態には以下の 2 通りある  
なお，この関数を使用する前に，`pinMode()` 関数で出力に設定しておく必要がある

- `HIGH`
- `LOW`

`HIGH` はボードにより変わるが概ね 5V ないし 3.3V を，`LOW` は 0V を出力させることを意味する

### if() {} 文

これらはまるで関数と似たような見た目をしているが，関数ではない．言うなれば制御文である

`if` 文は，条件分岐に使う制御文で，カッコの中には条件式が入る．条件式には，以下のようなものがある（登場する変数 `a` `b` は `int` 型で定義されているものとする）

`(a < b)`  
`(a == b)`  
`(a != b)`

これら条件式は評価された後，`bool` 型を返す．そのため，以下のような書き方も（意味はないが）問題ない

```c
if(true) {
    // こっちが実行される
}else {
    // こっちは実行されない
}
```

```c
if(false) {
    // ここは実行されない
}else if(true) {
    // ここが実行される
}else {
    // ここも実行されない
}
```

なお，ここでは複文（波カッコ `{}` により囲まれた文の集合）で記述しているが，条件分岐したあとに実行する処理が一行で済む場合は波カッコを省略しても構わない．が，あまり推奨はしない

```c
if(true)
    function();
```

### while() {} 文

`if` 文は条件分岐に使ったが，`while` 文は繰り返し処理に使う．丸カッコの条件式の評価結果が `true` の間ずっと中の処理を繰り返す  
例えば，以下のように書けば永遠に中の処理が繰り返される

```c
while(true) {
    loop();
}
```

どこかで見覚えがないだろうか．そう．Arduino の `loop()` 関数は，中でこのように実行されているのである

また，意図的にコードを特定のところでストップさせたいときに，以下のようにすることがある．`Train-2` でも使われている手法である

```c
while(true);
```

## loop() 関数

`loop()` 関数では，同じ型の 2 つの変数を用意し，それぞれ 2 つのスイッチの状態を保存するのに使用している

新たに `digitalRead()` 関数が登場しているので紹介しておく

### digitalRead() 関数

引数は一つだけで，そこで指定したピンの状態をデジタルで読み取り，その結果を返す．返り値は `HIGH` か `LOW` である  
その結果をそれぞれ対応する変数に保存し，その後の条件分岐で使用している
